<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fullscreen Video Test</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000;
        }
        #video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div id="video-container">
        <iframe id="hihaho-video" src="https://player.hihaho.com/embed/de97a16f-1b37-49bd-bc9b-500b083ae64e?api=true" allow="autoplay; fullscreen; clipboard-read; clipboard-write" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true"></iframe>
    </div>

    <script>
        const videoContainer = document.getElementById('video-container');
        const iframe = document.getElementById('hihaho-video');

        // Event listener for messages from the iframe
        window.addEventListener('message', (event) => {
            const data = event.data;

            // Check if the hihaho player is ready
            if (data.type === 'documentTrigger' && data.triggerName === 'hihaho_ready') {
                if (!data.triggerData.supportsFullscreen) {
                    // Send a message to enable custom fullscreen handling
                    iframe.contentWindow.postMessage({ type: 'api_fullscreen_event' }, '*');
                }
            }
            // Check for enter fullscreen event
            else if (data.type === 'documentTrigger' && data.triggerName === 'hihaho_enter_fullscreen') {
                enterFullScreen();
            }
            // Check for exit fullscreen event
            else if (data.type === 'documentTrigger' && data.triggerName === 'hihaho_exit_fullscreen') {
                exitFullScreen();
            }
        }, false);

        // Function to simulate entering full screen
        function enterFullScreen() {
            videoContainer.style.position = 'fixed';
            videoContainer.style.top = '0';
            videoContainer.style.left = '0';
            videoContainer.style.width = '100vw';
            videoContainer.style.height = '100vh';
            videoContainer.style.zIndex = '9999';
            videoContainer.style.backgroundColor = '#000';
            videoContainer.style.display = 'flex';
            videoContainer.style.justifyContent = 'center';
            videoContainer.style.alignItems = 'center';

            // Request fullscreen on page load
            if (videoContainer.requestFullscreen) {
                videoContainer.requestFullscreen();
            } else if (videoContainer.mozRequestFullScreen) { /* Firefox */
                videoContainer.mozRequestFullScreen();
            } else if (videoContainer.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                videoContainer.webkitRequestFullscreen();
            } else if (videoContainer.msRequestFullscreen) { /* IE/Edge */
                videoContainer.msRequestFullscreen();
            }
        }

        // Function to simulate exiting full screen
        function exitFullScreen() {
            videoContainer.style.position = 'relative';
            videoContainer.style.width = '100%';
            videoContainer.style.paddingBottom = '56.25%';
            videoContainer.style.height = '0px';
            videoContainer.style.zIndex = '';
            videoContainer.style.backgroundColor = '';
            videoContainer.style.display = 'block';

            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
            }
        }

        // Automatically enter fullscreen when the page loads
        window.onload = function() {
            enterFullScreen();
        }
    </script>
</body>
</html>
